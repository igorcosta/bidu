# bidu backends

## What is a "backend"?

bidu is a model-level library, providing high-level building blocks for developing deep learning models. It does not handle itself low-level operations such as tensor products, convolutions and so on. Instead, it relies on a specialized, well-optimized tensor manipulation library to do so, serving as the "backend engine" of bidu. Rather than picking one single tensor library and making the implementation of bidu tied to that library, bidu handles the problem in a modular way, and several different backend engines can be plugged seamlessly into bidu.

At this time, bidu has two backend implementations available: the **TensorFlow** backend and the **Theano** backend.

- [TensorFlow](http://www.tensorflow.org/) is an open-source symbolic tensor manipulation framework developed by Google, Inc.
- [Theano](http://deeplearning.net/software/theano/) is an open-source symbolic tensor manipulation framework developed by LISA/MILA Lab at Université de Montréal.

In the future, we are likely to add more backend options. If you are interested in developing a new backend, get in touch!

----

## Switching from one backend to another

If you have run bidu at least once, you will find the bidu configuration file at:

`~/.bidu/bidu.json`

If it isn't there, you can create it.

The default configuration file looks like this:

```
{
    "image_dim_ordering": "tf",
    "epsilon": 1e-07,
    "floatx": "float32",
    "backend": "tensorflow"
}
```

Simply change the field `backend` to either `"theano"` or `"tensorflow"`, and bidu will use the new configuration next time you run any bidu code.

You can also define the environment variable ``bidu_BACKEND`` and this will
override what is defined in your config file :

```bash
bidu_BACKEND=tensorflow python -c "from bidu import backend"
Using TensorFlow backend.
```

----

## Using the abstract bidu backend to write new code

If you want the bidu modules you write to be compatible with both Theano and TensorFlow, you have to write them via the abstract bidu backend API. Here's an intro.

You can import the backend module via:
```python
from bidu import backend as K
```

The code below instantiates an input placeholder. It's equivalent to `tf.placeholder()` or `T.matrix()`, `T.tensor3()`, etc.

```python
input = K.placeholder(shape=(2, 4, 5))
# also works:
input = K.placeholder(shape=(None, 4, 5))
# also works:
input = K.placeholder(ndim=3)
```

The code below instantiates a shared variable. It's equivalent to `tf.variable()` or `theano.shared()`.

```python
val = np.random.random((3, 4, 5))
var = K.variable(value=val)

# all-zeros variable:
var = K.zeros(shape=(3, 4, 5))
# all-ones:
var = K.ones(shape=(3, 4, 5))
```

Most tensor operations you will need can be done as you would in TensorFlow or Theano:

```python
a = b + c * K.abs(d)
c = K.dot(a, K.transpose(b))
a = K.sum(b, axis=2)
a = K.softmax(b)
a = concatenate([b, c], axis=-1)
# etc...
```

----

## Backend functions


{{autogenerated}}





